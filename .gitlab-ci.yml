# Docker image to start from
image: continuumio/miniconda3:latest

# Install additional dependencies
# procps-ng is required for nextflow to generate process statistics.
before_script:
  - conda env update --file env.yml
  - source activate geley-rbp

# Execute some commands (e.g. `pytest` to execute python unit-tests,
# or run a nextflow pipeline)
test:
  stage: test
  script:
    - mkdir out
    - |
        ./runDESeq2_ICBI.R testdata/sampleTableN.csv testdata/merged_gene_counts.txt  --result_dir=out \
        --sample_col=sample --condition_col=overexpression \
        --c1=PFKFB3_S461E --c2=MOCK \
        --gtf_file=testdata/gencode_subset.gtf
    - |
        ./runDESeq2_ICBI.R testdata/sampleTableN.csv testdata/merged_gene_counts.txt  --result_dir=out \
        --sample_col=sample --condition_col=overexpression \
        --c1=PFKFB3_S461E --c2=MOCK \
        --paired_grp=treatment \
        --gtf_file=testdata/gencode_subset.gtf

